import pytest
import mimesis

from geo_data.models import City, Country

from parser.base import Parser
from parser.ecolines import OfferPageParser, LocalUrlParser


@pytest.fixture()
def offer_tpl():
    """Returns offer template with random data."""

    return '''<div class="offer"><div class="offer-wrapper"> <a href="{url}" class="offer-link"></a> <img src="{image}" class="img-responsive" alt="Riga"><h2 class="offer-title"> <span class="origin">{from_city} → </span> {to_city}</h2><div class="row"><h2 style="margin-right:15px;"><span class="label label-primary pull-right">{price} {currency}</span><span class="pull-left" style="font-size: 18px; margin-left:15px; padding-top:15px; "><s>16.50 EUR</s></span></h2><div class="col-xs-6"></div><div class="col-xs-offset-6 col-xs-6"><p class="offer-period"> <span class="offer-period-dates"> <span style="font-weight:600;"><span class="date-display-single" property="dc:date" datatype="xsd:dateTime" content="2017-12-01T00:00:00+02:00">01.12.2017</span></span> - <span style="font-weight:600;"><span class="date-display-single" property="dc:date" datatype="xsd:dateTime" content="2018-01-04T00:00:00+02:00">04.01.2018</span></span> </span></p></div></div><hr><div class="btn-labeled pull-left"> <a href="https://ecolines.net/ee/et/booking-search?locale=et&amp;currency=11&amp;outwardOrigin=201&amp;outwardDestination=1 " class="btn btn-primary"> <span class="btn-label"> <i class="fa fa-shopping-cart"></i> </span> Osta pilet </a></div><div class="btn-labeled pull-right"> <a href="https://ecolines.net/ee/et/pakkumised/valismaal/tallinn-riia" class="btn btn-default"> <span class="btn-label"> <i class="fa fa fa-search-plus"></i> </span> Rohkem infot </a></div><div class="corner-ribbon top-left red shadow">Allahindlus -70%</div></div></div>'''  # noqa


@pytest.fixture
def offers_tpl(offer_tpl, page_url, img_url, price, currency_code):
    """html containing offers."""
    return '<div class="row row-main">' + ''.join((
        '<div class="col-lg-4 col-md-6">{}</div>'.format(offer_tpl.format(
            url=page_url,
            image=img_url,
            from_city=mimesis.Address().city(),
            to_city=mimesis.Address().city(),
            price=price,
            currency=currency_code
        ))
        for _ in range(5)
    )) + '</div>'


@pytest.fixture
def locales_tpl():
    """Locales script."""
    return r'''
  <html><head>
  <script defer="defer">
  jQuery.migrateMute=true;jQuery.migrateTrace=false;</script>
  <script>jQuery.extend(Drupal.settings, {"basePath":"\/ee\/","pathPrefix":"et\/","ajaxPageState":{"theme":"ecolines","theme_token":"0N8TilzbOtpoOf8dEY7jQoz_A0eMY2wMPmPnm04D-_E","js":{"sites\/all\/themes\/bootstrap\/js\/bootstrap.js":1,"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.11\/jquery.min.js":1,"0":1,"sites\/all\/modules\/jquery_update\/replace\/jquery-migrate\/1\/jquery-migrate.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"\/\/cdn.jsdelivr.net\/bootstrap\/3.2.0\/js\/bootstrap.min.js":1,"sites\/all\/modules\/ecolines_agencies\/js\/main.js":1,"sites\/all\/modules\/ecolines_arrivals_today\/js\/main.js":1,"sites\/all\/modules\/ecolines_bus_stops\/js\/main.js":1,"sites\/all\/modules\/ecolines_contacts\/js\/main.js":1,"sites\/all\/modules\/ecolines_language\/js\/selectize.min.js":1,"sites\/all\/modules\/ecolines_language\/js\/main.js":1,"sites\/all\/libraries\/colorbox\/jquery.colorbox-min.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/stockholmsyndrome\/colorbox_style.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox_load.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox_inline.js":1,"https:\/\/ecolines.net\/page\/sites\/all\/themes\/ecolines\/js\/bootstrap-select.min.js":1,"https:\/\/ecolines.net\/page\/sites\/all\/themes\/ecolines\/js\/bootstrap-datepicker.min.js":1,"https:\/\/ecolines.net\/page\/sites\/all\/themes\/ecolines\/js\/booking-token3.js?12":1,"sites\/all\/themes\/ecolines\/js\/bootbox.min.js":1},"css":{"modules\/system\/system.base.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"sites\/all\/modules\/ecolines_agencies\/css\/maina.css":1,"sites\/all\/modules\/ecolines_arrivals_today\/css\/maina.css":1,"sites\/all\/modules\/ecolines_bus_stops\/css\/main.css":1,"sites\/all\/modules\/ecolines_contacts\/css\/main.css":1,"sites\/all\/modules\/ecolines_language\/css\/selectize.bootstrap3.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ckeditor\/css\/ckeditor.css":1,"sites\/all\/modules\/colorbox\/styles\/stockholmsyndrome\/colorbox_style.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/libraries\/fontawesome\/css\/font-awesome.css":1,"\/\/cdn.jsdelivr.net\/bootstrap\/3.2.0\/css\/bootstrap.min.css":1,"sites\/all\/themes\/bootstrap\/css\/3.2.0\/overrides.min.css":1,"sites\/all\/themes\/ecolines\/bower_components\/awesome-bootstrap-checkbox\/awesome-bootstrap-checkbox.css":1,"sites\/all\/themes\/ecolines\/css\/bootstrap-select.min.css":1,"sites\/all\/themes\/ecolines\/css\/bootstrap-datepicker.min.css":1,"sites\/all\/themes\/ecolines\/css\/booking.css":1,"sites\/all\/themes\/ecolines\/css\/style.css":1,"sites\/all\/themes\/ecolines\/css\/override.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px"},"ecolines_language":{"localization":"{\u0022lv\u0022:{\u0022name\u0022:\u0022latvia\u0022,\u0022flag\u0022:\u0022lv\u0022,\u0022lng\u0022:[\u0022lv\u0022,\u0022ru\u0022,\u0022en\u0022],\u0022native\u0022:[\u0022Latvie\\u0161u\u0022,\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022,\u0022English\u0022]},\u0022ru\u0022:{\u0022name\u0022:\u0022russia\u0022,\u0022flag\u0022:\u0022ru\u0022,\u0022lng\u0022:[\u0022ru\u0022],\u0022native\u0022:[\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022]},\u0022ee\u0022:{\u0022name\u0022:\u0022estonia\u0022,\u0022flag\u0022:\u0022ee\u0022,\u0022lng\u0022:[\u0022et\u0022,\u0022en\u0022,\u0022ru\u0022],\u0022native\u0022:[\u0022Eesti\u0022,\u0022English\u0022,\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022]},\u0022lt\u0022:{\u0022name\u0022:\u0022lithuania\u0022,\u0022flag\u0022:\u0022lt\u0022,\u0022lng\u0022:[\u0022lt\u0022,\u0022en\u0022,\u0022ru\u0022],\u0022native\u0022:[\u0022Lietuvi\\u0161kas\u0022,\u0022English\u0022,\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022]},\u0022bg\u0022:{\u0022name\u0022:\u0022bulgaria\u0022,\u0022flag\u0022:\u0022bg\u0022,\u0022lng\u0022:[\u0022bg\u0022],\u0022native\u0022:[\u0022\\u0411\\u044a\\u043b\\u0433\\u0430\\u0440\\u0441\\u043a\\u0438\u0022]},\u0022de\u0022:{\u0022name\u0022:\u0022germany\u0022,\u0022flag\u0022:\u0022de\u0022,\u0022lng\u0022:[\u0022de\u0022,\u0022ru\u0022,\u0022en\u0022],\u0022native\u0022:[\u0022Deutsch\u0022,\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022,\u0022English\u0022]},\u0022pl\u0022:{\u0022name\u0022:\u0022poland\u0022,\u0022flag\u0022:\u0022pl\u0022,\u0022lng\u0022:[\u0022pl\u0022,\u0022en\u0022,\u0022ru\u0022],\u0022native\u0022:[\u0022Polski\u0022,\u0022English\u0022,\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022]},\u0022ua\u0022:{\u0022name\u0022:\u0022ukraine\u0022,\u0022flag\u0022:\u0022ua\u0022,\u0022lng\u0022:[\u0022ru\u0022,\u0022uk\u0022],\u0022native\u0022:[\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022,\u0022\\u0423\\u043a\\u0440\\u0430\\u0457\\u043d\\u0441\\u044c\\u043a\\u0430\u0022]},\u0022by\u0022:{\u0022name\u0022:\u0022belarus\u0022,\u0022flag\u0022:\u0022by\u0022,\u0022lng\u0022:[\u0022ru\u0022],\u0022native\u0022:[\u0022P\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439\u0022]},\u0022international\u0022:{\u0022name\u0022:\u0022international\u0022,\u0022flag\u0022:\u0022ww\u0022,\u0022lng\u0022:[\u0022en\u0022],\u0022native\u0022:[\u0022English\u0022]}}","region_local":{"lv":{"latvia":"Latvija","russia":"Krievija","estonia":"Igaunija","lithuania":"Lietuva","bulgaria":"Bulgarija","germany":"V\u0101cija","poland":"Polija","ukraine":"Ukraina","belarus":"Baltkrievija","international":"Starptautiska"},"ru":{"latvia":"\u041b\u0430\u0442\u0432\u0438\u044f","russia":"\u0420\u043e\u0441\u0441\u0438\u044f","estonia":"\u042d\u0441\u0442\u043e\u043d\u0438\u044f","lithuania":"\u041b\u0438\u0442\u0432\u0430","bulgaria":"\u0411\u043e\u043b\u0433\u0430\u0440\u0438\u044f","germany":"\u0413\u0435\u0440\u043c\u0430\u043d\u0438\u044f","poland":"\u041f\u043e\u043b\u044c\u0448\u0430","ukraine":"\u0423\u043a\u0440\u0430\u0438\u043d\u0430","belarus":"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c","international":"\u041c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0439"},"en":{"latvia":"Latvia","russia":"Russia","estonia":"Estonia","lithuania":"Lithuania","bulgaria":"Bulgaria","germany":"Germany","poland":"Poland","ukraine":"Ukraine","belarus":"Belarus","international":"International"},"et":{"latvia":"L\u00e4ti","russia":"Venemaa","estonia":"Eesti","lithuania":"Leedu","bulgaria":"Bulgaria","germany":"Saksamaa","poland":"Poola","ukraine":"Ukraina","belarus":"Valgevene","international":"Rahvusvaheline"},"lt":{"latvia":"Latvija","russia":"Rusija","estonia":"Estija","lithuania":"Lietuva","bulgaria":"Bulgarija","germany":"Vokietija","poland":"Lenkija","ukraine":"Ukraina","belarus":"Baltarusija","international":"Tarptautinis"},"bg":{"latvia":"\u041b\u0430\u0442\u0432\u0438\u044f","russia":"\u0420\u0443\u0441\u0438\u044f","estonia":"\u0415\u0441\u0442\u043e\u043d\u0438\u044f","lithuania":"\u041b\u0438\u0442\u0432\u0430","bulgaria":"\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f","germany":"\u0413\u0435\u0440\u043c\u0430\u043d\u0438\u044f","poland":"\u041f\u043e\u043b\u0448\u0430","ukraine":"\u0423\u043a\u0440\u0430\u0439\u043d\u0430","belarus":"\u0411\u0435\u043b\u0430\u0440\u0443\u0441","international":"\u041c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u0435\u043d"},"de":{"latvia":"Lettland","russia":"Russland","estonia":"Estland","lithuania":"Litauen","bulgaria":"Bulgarien","germany":"Deutschland","poland":"Polen","ukraine":"Ukraine","belarus":"Wei\u00dfrussland","international":"International"},"pl":{"latvia":"\u0141otwa","russia":"Rosja","estonia":"Estonia","lithuania":"Litwa","bulgaria":"Bu\u0142garia","germany":"Niemcy","poland":"Polska","ukraine":"Ukraina","belarus":"Bia\u0142oru\u015b","international":"Mi\u0119dzynarodowy"},"uk":{"latvia":"\u041b\u0430\u0442\u0432\u0456\u044f","russia":"\u0420\u043e\u0441\u0456\u044f","estonia":"\u0415\u0441\u0442\u043e\u043d\u0456\u044f","lithuania":"\u041b\u0438\u0442\u0432\u0430","bulgaria":"\u0411\u043e\u043b\u0433\u0430\u0440\u0456\u044f","germany":"\u041d\u0456\u043c\u0435\u0447\u0447\u0438\u043d\u0430","poland":"\u041f\u043e\u043b\u044c\u0449\u0430","ukraine":"\u0423\u043a\u0440\u0430\u0457\u043d\u0430","belarus":"\u0411\u0456\u043b\u043e\u0440\u0443\u0441\u044c","international":"\u041c\u0456\u0436\u043d\u0430\u0440\u043e\u0434\u043d\u0438\u0439"},"bl":{"latvia":"\u041b\u0430\u0442\u0432\u0456\u044f","russia":"\u0420\u0430\u0441\u0456\u044f","estonia":"\u042d\u0441\u0442\u043e\u043d\u0456\u044f","lithuania":"\u041b\u0456\u0442\u0432\u0430","bulgaria":"\u0411\u0430\u043b\u0433\u0430\u0440\u044b\u044f","germany":"\u0413\u0435\u0440\u043c\u0430\u043d\u0456\u044f","poland":"\u041f\u043e\u043b\u044c\u0448\u0447\u0430","ukraine":"\u0423\u043a\u0440\u0430\u0456\u043d\u0430","belarus":"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c","international":"M\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0439"}},"region":"ee","language":"et","site":"https:\/\/ecolines.net","alternative_urls":"\u0022\u0022"},"better_exposed_filters":{"views":{"main_front_page_image_carousel":{"displays":{"block":{"filters":[]}}},"front_page_image_slider":{"displays":{"block":{"filters":[]}}},"offers_carousel":{"displays":{"block_1":{"filters":[]},"block_2":{"filters":[]},"block_3":{"filters":[]},"block_4":{"filters":[]},"block_5":{"filters":[]},"block_6":{"filters":[]},"block_7":{"filters":[]},"block_8":{"filters":[]},"block_9":{"filters":[]}}},"front_page_articles_list":{"displays":{"block":{"filters":[]}}},"announcements":{"displays":{"block":{"filters":[]}}}}},"bootstrap":{"anchorsFix":0,"anchorsSmoothScrolling":1,"formHasError":1,"popoverEnabled":1,"popoverOptions":{"animation":1,"html":0,"placement":"right","selector":"","trigger":"click","triggerAutoclose":1,"title":"","content":"","delay":0,"container":"body"},"tooltipEnabled":1,"tooltipOptions":{"animation":1,"html":0,"placement":"auto left","selector":"","trigger":"hover focus","delay":0,"container":"body"}}});</script>
</head><body></body></html>'''  # noqa


@pytest.fixture
def menu_tpl():
    return '''<div id="main-navbar" class="navbar navbar-default navbar-static-top"><div class="container"><div class="navbar-header"> <a class="navbar-brand" href="/ee/et" title="Home" rel="home" id="logo"> <img src="https://ecolines.net/ee/sites/all/themes/ecolines/images/logo.png" alt="ECOLINES" /> </a> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button></div><div class="collapse navbar-collapse" id="main-navbar-collapse"><ul class="menu nav navbar-nav"><li class="first leaf active active"><a href="/ee/et" class="active"><i class="fa fa-home" aria-hidden="true"></i><span class="visible-xs-inline">Home</span></a></li><li class="leaf"><a href="/ee/et/pakkumised/valismaal">Pakkumised</a></li><li class="expanded dropdown"><a href="//#" class="dropdown-toggle" data-toggle="dropdown">Reis <span class="caret"></span></a><ul class="dropdown-menu"><li class="first expanded dropdown-submenu"><a href="//#" class="dropdown-toggle" data-toggle="dropdown">Bussipiletid</a><ul class="dropdown-menu"><li class="first leaf"><a href="/ee/et/reis/bussipiletid/osta-piletid">Osta piletid</a></li><li class="leaf"><a href="/ee/et/reis/bussipiletid/minu-pilet">Minu pilet</a></li><li class="last leaf"><a href="/ee/et/reis/bussipiletid/registracija-i-reisa">Registracija į reisą</a></li></ul></li><li class="leaf"><a href="/ee/et/reis/bussipeatused">Bussipeatused</a></li><li class="leaf"><a href="/ee/et/reis/soidugraafik">Sõidugraafik</a></li><li class="leaf"><a href="/ee/et/reis/muugipunktid">Müügipunktid</a></li><li class="leaf"><a href="/ee/et/reis/saabumisajad">Saabumisajad</a></li><li class="leaf"><a href="/ee/et/reis/pileti-hind-bussis">Pileti hind bussis</a></li><li class="last leaf"><a href="/ee/et/reis/pusikliendisusteem">Püsikliendisüsteem</a></li></ul></li><li class="expanded dropdown"><a href="//#" class="dropdown-toggle" data-toggle="dropdown">Info <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="/ee/et/info/pagasi-transportimine">Pagasi transportimine</a></li><li class="leaf"><a href="/ee/et/info/reeglid-ja-tingimused">Reeglid ja tingimused</a></li><li class="leaf"><a href="/ee/et/info/korduma-kippuvad-kusimused">Korduma kippuvad küsimused</a></li><li class="leaf"><a href="/ee/et/info/naidispilet">Näidispilet</a></li><li class="last leaf"><a href="/ee/et/info/sms-teenus">SMS teenus</a></li></ul></li><li class="expanded dropdown"><a href="//#" class="dropdown-toggle" data-toggle="dropdown">Meist <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="/ee/et/meist/ecolines-bussid">ECOLINES bussid</a></li><li class="leaf"><a href="/ee/et/meist/ecolines-ettevottest">ECOLINES ettevõttest</a></li><li class="leaf"><a href="/ee/et/meist/ecolines-pildigalerii">ECOLINES pildigalerii</a></li><li class="leaf"><a href="/ee/et/meist/kuldstandard">Kuldstandard</a></li><li class="leaf"><a href="/ee/et/meist/multimeedia-susteem">Multimeedia Süsteemi</a></li><li class="leaf"><a href="/ee/et/meist/virtuaaltuur">Virtuaaltuur</a></li><li class="last leaf"><a href="/ee/et/meist/teenused-bussi-pardal">Teenused bussi pardal</a></li></ul></li><li class="leaf"><a href="/ee/et/kontaktid">Kontaktid</a></li><li class="last expanded dropdown"><a href="//#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-facebook" aria-hidden="true"></i><span class="fa fa-ellipsis-h"><none> <span class="caret"></span></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="//facebook.com/ecolines" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i>Facebook</a></li><li class="leaf"><a href="//twitter.com/ecolines" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i>Twitter</a></li><li class="leaf"><a href="//vk.com/ecolinesnet" target="_blank"><i class="fa fa-vk" aria-hidden="true"></i>VKontakte</a></li><li class="leaf"><a href="//ok.ru/ecolines" target="_blank"><i class="fa fa-odnoklassniki" aria-hidden="true"></i>Odnoklassniki</a></li><li class="leaf"><a href="//instagram.com/ecolinesbus" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i>Instagram</a></li><li class="leaf"><a href="//youtube.com/user/EcolinesLV" target="_blank"><i class="fa fa-youtube" aria-hidden="true"></i>YouTube</a></li><li class="leaf"><a href="//draugiem.lv/ecolines" target="_blank"><i class="fa fa-draugiem" aria-hidden="true"></i>Draugiem</a></li><li class="last leaf"><a href="//plus.google.com/+ecolines/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i>Google Plus</a></li></ul></li></ul><div class="region region-language-region pull-right"> <section id="block-ecolines-language-ecolines-language-regions" class="block block-ecolines-language clearfix"><div class="btn-labeled navbar-btn pull-right" data-toggle="modal" data-target="#locale-modal"> <a href="#" class="btn btn-default"> <span class="btn-label"> <span class="flag flag-ee"></span> </span> <span id="lang_long">Eesti</span> </a></div></section></div></div></div></div><div id="bookingBuy" class="front_page"> <a href="/./ee/et/booking-search?locale=et&currency=11&outwardOrigin=&outwardDestination=" class="btn btn-primary" > <span class="btn-label"> <i class="fa fa-shopping-cart"></i> </span> Osta pilet </a></div><div class="region region-main-slider"> <section id="block-views-front-page-image-slider-block" class="block block-views clearfix"><div class="view view-front-page-image-slider view-id-front_page_image_slider view-display-id-block view-dom-id-3a40588968cfbdd015c586e6880a7783"><div id="image-slider" class="carousel slide" data-interval="10000" data-pause="hover" data-ride="carousel" data-interval="false"><div class="container" id="fs_page"><div id="ecolines-booking-form-warpper" ><div class="panel panel-default"><ul class="nav nav-tabs"><li class="active"> <a href="#ecolines-booking-form-booking-tab" data-toggle="tab"> <i class="fa fa-search"></i> Otsing </a></li><li> <a href="/ee/et/reis/bussipiletid/minu-pilet" > <i class="fa fa-ticket"></i> Мinu pilet </a></li><li> <a href="https://ecolines.net/international/en/trip/ecolines-loyalty-system/your-system?locale=et" > <i class="fa fa-gift"></i> Teie boonus </a></li></ul><div class="panel-body"><div class="tab-content"><div class="tab-pane active" id="ecolines-booking-form-booking-tab"><form id="ecolines-booking-form" method="get" data-lng="et" data-short-url="/ee/et/" action="/ee/et/booking-search" novalidate="novalidate"> <input type="hidden" name="locale" id="ecolines-booking-form-locale" value="et" /> <input type="hidden" name="currency" id="ecolines-booking-form-currency" value="11" /> <input type="hidden" name="returnOrigin" id="ecolines-booking-form-return-origin" value="" /> <input type="hidden" name="returnDestination" id="ecolines-booking-form-return-destination" value="" /><div class="form-group" id="travel-type"><div class="radio radio-inline"> <input type="radio" id="ecolines-booking-form-onewaytrip" value="0" name="returning" checked="checked" /> <label for="ecolines-booking-form-onewaytrip">Üks suund</label></div><div class="radio radio-inline"> <input type="radio" id="ecolines-booking-form-roundtrip" value="1" name="returning" /> <label for="ecolines-booking-form-roundtrip">Edasi-tagasi</label></div></div><div class="form-group" id="route-switch"><div class="btn-group btn-group-justified" data-toggle="buttons"> <label class="btn btn-default btn-sm active"> <input type="radio" id="ecolines-booking-form-route-abroad" value="0" name="type" autocomplete="off" checked="checked"> Välismaal </label> <label class="btn btn-default btn-sm"> <input type="radio" id="ecolines-booking-form-route-local" data-domestic-region="ee" value="1" name="type" autocomplete="off"> Siseriiklikud </label></div></div><div class="row"><div class="col-md-6"><div class="form-group"> <select class="form-control" id="ecolines-booking-form-origin" data-live-search="true" data-hide-disabled="true" title="Lähtekoht" name="outwardOrigin"><option value="" disabled="disabled"></option> </select></div></div><div class="col-md-6"><div class="form-group"> <select class="form-control" id="ecolines-booking-form-destination" data-live-search="true" data-hide-disabled="true" title="Sihtkoht" name="outwardDestination"><option value="" disabled="disabled"></option> </select></div></div></div><div class="row"><div class="col-md-6"><div class="form-group"><div class="input-group"> <input type="text" class="form-control" id="ecolines-booking-form-date" autocomplete="off" placeholder="Väljumise kuupäev" name="outwardDate" value="" /> <span class="input-group-btn"> <label class="btn btn-default" for="ecolines-booking-form-date"> <i class="fa fa-calendar"></i> </label> </span></div></div></div><div class="col-md-6"><div class="form-group"><div class="input-group"> <input type="text" class="form-control" id="ecolines-booking-form-return-date" autocomplete="off" placeholder="Saabumise kuupäev" name="returnDate" value="" /> <span class="input-group-btn"> <label class="btn btn-default" for="ecolines-booking-form-return-date"> <i class="fa fa-calendar"></i> </label> </span></div></div></div></div><div class="row"><div class="col-md-6"><div class="form-group"> <select class="form-control" id="ecolines-booking-form-adults" name="adults"><option title="Täiskasvanud: 0" value="0">0</option><option title="Täiskasvanud: 1" value="1" selected="selected">1</option><option title="Täiskasvanud: 2" value="2">2</option><option title="Täiskasvanud: 3" value="3">3</option><option title="Täiskasvanud: 4" value="4">4</option><option title="Täiskasvanud: 5" value="5">5</option><option title="Täiskasvanud: 6" value="6">6</option><option title="Täiskasvanud: 7" value="7">7</option><option title="Täiskasvanud: 8" value="8">8</option><option title="Täiskasvanud: 9" value="9">9</option><option title="Täiskasvanud: 10" value="10">10</option> </select></div></div><div class="col-md-6"><div class="form-group"> <select class="form-control" id="ecolines-booking-form-children" name="children"><option title="Lapsed: 0" value="0" selected="selected">0</option><option title="Lapsed: 1" value="1">1</option><option title="Lapsed: 2" value="2">2</option><option title="Lapsed: 3" value="3">3</option><option title="Lapsed: 4" value="4">4</option><option title="Lapsed: 5" value="5">5</option><option title="Lapsed: 6" value="6">6</option><option title="Lapsed: 7" value="7">7</option><option title="Lapsed: 8" value="8">8</option><option title="Lapsed: 9" value="9">9</option><option title="Lapsed: 10" value="10">10</option> </select></div></div></div><div class="row"><div class="col-md-6"><div class="form-group"> <select class="form-control" id="ecolines-booking-form-teens" name="teens"><option title="Noored / ISIC: 0" value="0" selected="selected">0</option><option title="Noored / ISIC: 1" value="1">1</option><option title="Noored / ISIC: 2" value="2">2</option><option title="Noored / ISIC: 3" value="3">3</option><option title="Noored / ISIC: 4" value="4">4</option><option title="Noored / ISIC: 5" value="5">5</option><option title="Noored / ISIC: 6" value="6">6</option><option title="Noored / ISIC: 7" value="7">7</option><option title="Noored / ISIC: 8" value="8">8</option><option title="Noored / ISIC: 9" value="9">9</option><option title="Noored / ISIC: 10" value="10">10</option> </select></div></div><div class="col-md-6"><div class="form-group"> <select class="form-control" id="ecolines-booking-form-seniors" name="seniors"><option title="Seeniorid / Invaliidid: 0" value="0" selected="selected">0</option><option title="Seeniorid / Invaliidid: 1" value="1">1</option><option title="Seeniorid / Invaliidid: 2" value="2">2</option><option title="Seeniorid / Invaliidid: 3" value="3">3</option><option title="Seeniorid / Invaliidid: 4" value="4">4</option><option title="Seeniorid / Invaliidid: 5" value="5">5</option><option title="Seeniorid / Invaliidid: 6" value="6">6</option><option title="Seeniorid / Invaliidid: 7" value="7">7</option><option title="Seeniorid / Invaliidid: 8" value="8">8</option><option title="Seeniorid / Invaliidid: 9" value="9">9</option><option title="Seeniorid / Invaliidid: 10" value="10">10</option> </select></div></div></div><div class="btn-labeled"> <button type="submit" class="btn btn-primary btn-lg"> <span class="btn-label"> <i class="fa fa-search"></i> </span> <span>Otsing</span> <span class="spinner"> <img src="https://ecolines.net/page/sites/all/themes/ecolines/images/spinner.gif" /> </span> </button></div></form></div></div></div></div></div>'''  # noqa


@pytest.fixture
def parser():
    """Returns parser instance."""
    return Parser(use_timeout=False)


@pytest.fixture
def local_url_parser():
    """Returns links parser."""
    return LocalUrlParser(use_timeout=False)


@pytest.fixture
def offer_parser():
    """Returns offer page parser."""
    return OfferPageParser(use_timeout=False)
